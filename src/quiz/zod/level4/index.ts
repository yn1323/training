/**
 * ====è§£èª¬====
 * è‡ªä½œã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¤ãã®ã‚¹ã‚­ãƒ¼ãƒã‚’ã¤ãã£ã¦ã¿ã‚ˆã†ï¼
 *
 * zodæ¨™æº–ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯è¶³ã‚Šãªã„å ´åˆã€ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
 * ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã¨ãã¯`refine`, `superRefine`ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
 * `refine`ãƒ»ãƒ»ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
 * `superRefine`ãƒ»ãƒ»ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«åŠ ãˆã€ZodErrorã®è©³ç´°æƒ…å ±ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
 *
 * åŸºæœ¬ã¯`refine`, ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è©³ç´°æƒ…å ±ãŒå¿…è¦ãªå ´åˆã¯`superRefine`ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
 *
 * ====å•é¡Œ====
 * `Q.`ã®ã‚ã¨ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã€ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ãã‚ã†
 * `npm run test zod/level4`ã§ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªã—ã‚ˆã†
 *
 * ====ãƒ’ãƒ³ãƒˆ====
 * https://zod.dev/?id=refine
 * https://zod.dev/?id=superrefine
 *
 */

import z from 'zod';

/**
 * Q. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ç¢ºèªç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’è¿”å´ã—ã‚ˆã†
 */
export const exampleRefine = () => {
  const passwordFormSchema = z
    .object({
      password: z.string(),
      confirm: z.string(),
    })
    .refine((data) => data.password === data.confirm, {
      message: "Passwords don't match",
      path: ['confirm'], // confirmãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¨ãƒ©ãƒ¼ã‚’è¿½åŠ 
    });

  return passwordFormSchema;
};

// ==== <<ğŸ‘ŒåŸºç¤ğŸ‘Œ>> ==== //
/**Q. exampleRefine()ã¨åŒã˜ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’superRefineã§æ›¸ã„ã¦ã¿ã‚ˆã† */
export const b1 = () => {
  const passwordFormSchema = z
    .object({
      password: z.string(),
      confirm: z.string(),
    })
    .superRefine(/* ã“ã“ã‚’ä¿®æ­£ã™ã‚‹ */);

  return passwordFormSchema;
};

/** Q. æ•°å€¤å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¿”å´ã—ã‚ˆã† */
export const b2 = () => {
  return z.xxxx();
};

/** Q. çœŸå½å€¤å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¿”å´ã—ã‚ˆã† */
export const b3 = () => {
  return z.xxxx();
};

// ==== <<ğŸ¤¯å¿œç”¨ğŸ¤¯>> ==== //
/**
 * Q. æ–‡å­—åˆ—ã®ã¿å…¥ã‚‹é…åˆ—ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¿”å´ã—ã‚ˆã†
 * ä¾‹: ['a', 'b', 'c'] => OK / [1, 2, 3] => NG
 */
export const a1 = () => {
  return z.boolean();
};

// ==== <<ğŸ‘¹é¬¼ğŸ‘¹>> ==== //
/**
 * Q. æ–‡å­—åˆ—é…åˆ—ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¿”å´ã—ã‚ˆã†
 * ä¾‹: ['a', 'b', 'c'] => OK / [1, 2, 3] => NG
 */
export const o1 = () => {
  return z.xxxx();
};
